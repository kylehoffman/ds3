<!DOCTYPE html>
<html>
  <head>
    <title>Cybernetic Forest Rebirth</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  </head>

  <body>
    <a-scene>
      <!-- Assets -->
      <a-assets>
        <video
          id="video360"
          src="Cybernetic_Forest_Rebirth_Video_Generation.mp4"
          loop
          muted
          playsinline
          crossorigin="anonymous">
        </video>
      </a-assets>

      <!-- 360° Background -->
      <a-videosphere src="#video360" rotation="0 -90 0"></a-videosphere>

      <!-- BOX 1 (center front) -->
      <a-box
        id="box1"
        position="0 1.6 -3"
        color="#00CED1"
        depth="0"
        height="0.4"
        width="0.4">
      </a-box>

      <!-- TEXT 1 -->
      <a-text
        id="text1"
        value="The forest is reborn as biotech. 
Trees pulse with glowing veins of circuitry, metallic leaves shimmer, and roots merge into cables feeding the water."
        position="0 2.0 -3"
        align="center"
        color="#FFF"
        width="4"
        visible="false"
        scale="0.5 0.5 0.5">
        look-at="[camera]">
      </a-text>

      <!-- BOX 2 (slightly right) -->
      <a-box
        id="box2"
        position="2.5 1.6 -3"
        color="#FF4500"
        depth="0"
        height="0.4"
        width="0.4"
        visible="false">
      </a-box>

      <!-- TEXT 2 -->
      <a-text
        id="text2"
        value="Floating drones hum overhead, scanning the area as neon-orange and violet sun sets.
A lone humanoid silhouette gazes at the glowing forest."
        position="2.5 2.5 -3"
        align="center"
        color="#FFF"
        width="4"
        visible="false"
        scale="0.75 0.75 0.75"
        look-at="[camera]">
      </a-text>

      <!-- BOX 3 (behind the user, 180°) -->
      <a-box
        id="box3"
        position="-2.5 1.6 -3"
        color="#FFD700"
        depth="0"
        height="0.4"
        width="0.4"
        visible="false">
      </a-box>

      <!-- TEXT 3 -->
      <a-text
        id="text3"
        value="The forest sheds glowing data fragments — red, gold, copper holographic leaves dissolve into the air.
Each leaf becomes a data packet, merging into streams of light feeding the ground or the lake, symbolizing death transforming into digital life."
        position="-2.5 2.5 -3"
        align="center"
        color="#FFF"
        width="4"
        visible="false"
        scale="0.75 0.75 0.75"
        look-at="[camera]">
      </a-text>

      <!-- Camera + cursor -->
      <a-entity camera look-controls position="0 1.6 0">
        <a-entity 
          cursor="fuse: false"
          position="0 0 -1"
          geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
          material="color: white; shader: flat">
        </a-entity>
      </a-entity>
    </a-scene>

    <script>
      const box1 = document.querySelector('#box1');
      const box2 = document.querySelector('#box2');
      const box3 = document.querySelector('#box3');
      const text1 = document.querySelector('#text1');
      const text2 = document.querySelector('#text2');
      const text3 = document.querySelector('#text3');
      const video = document.querySelector('#video360');

      // Autoplay video
      window.addEventListener('load', () => {
        video.play().catch(err => console.warn('Autoplay prevented:', err));
      });

      // Box 1 interaction
      box1.addEventListener('mouseenter', () => {
        text1.setAttribute('visible', true);
        box1.setAttribute('animation', 'property: scale; to: 0.5 0.5 0.5; dur: 300; dir: alternate; loop: 2');
        setTimeout(() => box2.setAttribute('visible', true), 1500);
      });
      box1.addEventListener('mouseleave', () => text1.setAttribute('visible', false));

      // Box 2 interaction
      box2.addEventListener('mouseenter', () => {
        text2.setAttribute('visible', true);
        box2.setAttribute('animation', 'property: scale; to: 0.5 0.5 0.5; dur: 300; dir: alternate; loop: 2');
        setTimeout(() => box3.setAttribute('visible', true), 1500);
      });
      box2.addEventListener('mouseleave', () => text2.setAttribute('visible', false));

      // Box 3 interaction
      box3.addEventListener('mouseenter', () => {
        text3.setAttribute('visible', true);
        box3.setAttribute('animation', 'property: scale; to: 0.5 0.5 0.5; dur: 300; dir: alternate; loop: 2');
      });
      box3.addEventListener('mouseleave', () => text3.setAttribute('visible', false));
    </script>
  </body>
</html>
